services:

  # API-сервис
  ewm-api:
    build:
      context: ./ewm-api
      dockerfile: Dockerfile
    image: java-explore/ewm-api:latest
    container_name: ewm-api
    ports:
      - "8080:8080"
    environment:
      SHAREIT_URL: ${SHAREIT_URL:-http://host.docker.internal:8080}
      SERVER_PORT: ${EWMPORT:-8080}

  # Сервис статистики
  ewm-stats:
    build:
      context: ./ewm-statistic-service
      dockerfile: Dockerfile
    image: java-explore/ewm-stats:latest
    container_name: ewm-stats
    ports:
      - "9090:9090"
    environment:
      SERVER_PORT: ${STATS_PORT:-9090}
    depends_on:
      - ewm-api

volumes:
  # тома, если хотите БД
  stats-db-data:

# версии в Compose V2 не указываются
